"use strict";(self["webpackChunkarch_main"]=self["webpackChunkarch_main"]||[]).push([[9319],{1606:function(t,e,i){i.r(e),i.d(e,{default:function(){return w}});var a=i(375),r=i(1689),s=i(8834),n=i(1526),o=i(7405),l=i(4155),c=i(8230),d=i(8412),u=i(7410),p=i(3406),h=function(){var t=this,e=t._self._c;return e(r.A,{staticStyle:{"background-color":"transparent"},attrs:{elevation:"0",disabled:t.loading}},[e(d.A,[e(n.A,{attrs:{md:"12",cols:"12"}},[e("BlockItem",[e("template",{slot:"icon"},[t._v("mdi-google-nearby")]),e("span",{attrs:{slot:"title"},slot:"title"},[t._v("درخواست های طراح")]),e(o.A,{attrs:{"hide-default-footer":"",headers:t.headers,loading:t.loading,items:t.data.data,"item-key":"id","disable-sort":""},scopedSlots:t._u([{key:"item.product.title",fn:function({item:i}){return[i.product.title.length>50?e("a",{staticClass:"secondary--text",on:{click:function(e){return t.detail(i.product.id)}}},[t._v(t._s(i.product.title.substring(0,50)+"..."))]):e("a",{staticClass:"secondary--text",on:{click:function(e){return t.detail(i.product.id)}}},[t._v(t._s(i.product.title))])]}},{key:"item.payed",fn:function({item:i}){return[i&&i.product&&i.product.product_type&&i.product.product_type.value&&i.payed&&"tender"==i.product.product_type.value?e("span",{staticClass:"table-flag-enabled table-flag-enabled--green"},[t._v("پرداخت شده")]):i&&i.product&&i.product.product_type&&i.product.product_type.value&&!i.payed&&"tender"==i.product.product_type.value?e("span",{staticClass:"table-flag-enabled table-flag-enabled--red"},[t._v("پرداخت نشده")]):e("span",{staticClass:"table-flag-enabled table-flag-enabled--yellow"},[t._v("پس پرداخت")])]}},{key:"item.status",fn:function({item:i}){return[null===i.chosen&&null===i.confirmed?e("span",{staticClass:"table-flag-enabled table-flag-enabled--yellow"},[t._v("بررسی نشده")]):!0===i.chosen||!0===i.confirmed?e("span",{staticClass:"table-flag-enabled table-flag-enabled--green"},[t._v("تایید شده")]):e("span",{staticClass:"table-flag-enabled table-flag-enabled--red"},[t._v("رد شده")])]}},{key:"item.price",fn:function({item:i}){return[i&&i.price?e("span",{staticStyle:{"font-size":"12px"}},[t._v(t._s(t._f("digit")(i.price))+" تومان")]):t._e()]}},{key:"item.id",fn:function({item:i}){return[null===i.chosen&&null===i.confirmed?e("div",{staticClass:"d-flex justify-center"},[e("a-sbtn",{attrs:{color:"info",icon:"mdi-currency-usd",alt:"تغییر پیشنهاد"},on:{clickBtn:function(e){return t.toEditPrice(i.id)}}})],1):t._e()]}}],null,!0)})],2)],1)],1),e(l.A,{attrs:{"max-width":"320"},model:{value:t.priceDialog,callback:function(e){t.priceDialog=e},expression:"priceDialog"}},[e(r.A,[e("a-card-title",[t._v("تغییر قیمت")]),e(s.OQ,{staticClass:"py-6"},[e(c.A,{ref:"price"},[t.renderComponent?e(p.A,{attrs:{outlined:"",dense:"","hide-details":"",rules:[t.$store.state.rules.required(t.price,"قیمت")],label:"قیمت پیشنهادی",color:"txtf"},on:{keypress:function(e){return t.isNumber(e)}},scopedSlots:t._u([{key:"append",fn:function(){return[e("img",{attrs:{width:"24",height:"24",src:i(2079)}})]},proxy:!0}],null,!1,2973386753),model:{value:t.price,callback:function(e){t.price=e},expression:"price"}}):t._e()],1)],1),e(s.SL,[e(u.A),e(a.A,{attrs:{height:"36",dark:"",color:"#222e3c"},on:{click:function(e){return t.changePrice()}}},[t._v(" تغییر دادن ")])],1)],1)],1),e("ProductSingleDialog",{attrs:{ddata:t.product,"public-use":!0}})],1)},m=[],f=i(2505),g=i.n(f),_=i(7427),v=i(4687),y=i(4757),b=i(9227),A=i.n(b),x=i(620),C=i(7791),k=i(5376),P={name:"AllRequestsProductDesigners",mixins:[x.O,C.l],components:{ProductSingleDialog:k.A,ACardTitle:y.A,ASbtn:v.A,BlockItem:_.A},created(){this.fetchDesignerProducts()},data(){return{priceDialog:!1,price:null,designerPrice:null,productSelected:null,data:{data:[]},loading:!1,product:{api:"",dialog:!1,loading:!1,idSelected:null}}},methods:{detail(t){this.product.dialog=!0,this.product.idSelected=t},toEditPrice(t){this.price=null,this.forceRerender(),this.productSelected=t,this.priceDialog=!0},changePrice(){this.$refs.price.validate(),this.$refs.price.validate()&&(this.priceDialog=!1,this.loading=!0,g().patch(this.$store.state.host+"/projects/api/v1/productdesigner/change-productdesigner/"+this.productSelected,{price:this.designerPrice},{headers:{Accept:"application/json",Authorization:`Bearer ${this.$store.state.userId}`}}).then((()=>{this.notify("قیمت بروز شد","info"),this.fetchDesignerProducts()})).catch((t=>{this.errorHandle(t.response)})))},fetchDesignerProducts(){this.loading=!0,g().get(this.$store.state.host+"/projects/api/v1/productdesigner/userproductdesigners",{headers:{Accept:"application/json",Authorization:`Bearer ${this.$store.state.userId}`}}).then((t=>{this.data=t.data})).catch((t=>{this.errorHandle(t.response)})).finally((()=>{this.loading=!1}))}},computed:{headers(){return[{text:"عنوان پروژه",align:"start",class:"header-table-gray",sortable:!1,value:"product.title"},{text:"قیمت پیشنهادی",class:"header-table-gray",align:"center",value:"price"},{text:"وضعیت",class:"header-table-gray",align:"center",value:"status"},{text:"و.پرداخت",class:"header-table-gray",align:"center",value:"payed"},{text:"امتیاز",class:"header-table-gray",align:"center",value:"point"},{text:"عملیات",class:"header-table-gray",align:"center",value:"id"}]}},watch:{price(t){this.price?(this.price=A()(t).format("0,0"),this.designerPrice=A()(this.price).value()):this.designerPrice=null}}},$=P,D=i(1656),S=(0,D.A)($,h,m,!1,null,"6bd6ef7b",null),w=S.exports},4757:function(t,e,i){i.d(e,{A:function(){return d}});var a=i(8834),r=function(){var t=this,e=t._self._c;return e(a.ri,{staticStyle:{"font-family":"'Shabnam FD' !important",color:"white","background-color":"#222e3c","font-size":"20px"}},[t._t("default")],2)},s=[],n={name:"a-card-title"},o=n,l=i(1656),c=(0,l.A)(o,r,s,!1,null,"84d88086",null),d=c.exports},9476:function(t,e,i){i.d(e,{A:function(){return p}});var a=i(1526),r=i(8412),s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pt-6"},[e(r.A,[t.item&&t.item.title?e(a.A,{staticClass:"py-1",attrs:{cols:"12"}},[t._v(" عنوان : "),e("strong",{domProps:{textContent:t._s(t.item.title)}})]):t._e(),t.item&&t.item.product_type&&t.item.product_type.title?e(a.A,{staticClass:"py-1",attrs:{cols:"12",md:"4"}},[t._v(" نوع پروژه : "),e("strong",{domProps:{textContent:t._s(t.item.product_type.title)}})]):t._e(),t.item&&t.item.location&&t.item.location.province&&t.item.location.province.name?e(a.A,{staticClass:"py-1",attrs:{cols:"12",md:"4"}},[t._v(" موقعیت : "+t._s(t.item.location.province.name)+" ( "),e("strong",{domProps:{textContent:t._s(t.item.location.name)}}),t._v(" ) ")]):t._e(),t.item&&t.item.foundation?e(a.A,{staticClass:"py-1",attrs:{cols:"12",md:"4"}},[t._v(" مساحت زیربنا : "),e("strong",{domProps:{textContent:t._s(t.item.foundation)}}),t._v(" متر ")]):t._e(),t.item&&t.item.price?e(a.A,{staticClass:"py-1",attrs:{cols:"12",md:"4"}},[t._v(" قیمت : "),e("strong",[t._v(t._s(t._f("digit")(t.item.price)))]),t._v(" تومان ")]):t._e(),t.item&&t.item.date_const_date?e(a.A,{staticClass:"py-1",attrs:{cols:"12",md:"4"}},[t._v(" شروع رویداد : "),e("strong",[t._v(t._s(t._f("momentDate")(t.item.date_const_date)))])]):t._e(),t.item&&t.item.date_expire_date?e(a.A,{staticClass:"py-1",attrs:{cols:"12",md:"4"}},[t._v(" پایان رویداد : "),e("strong",[t._v(t._s(t._f("momentDate")(t.item.date_expire_date)))])]):t._e(),t.item&&t.item.state&&t.item.state?e(a.A,{staticClass:"py-1",attrs:{cols:"12",md:"4"}},[t._v(" حالت پروژه : "),t._l(t.item.state,(function(i,a){return e("span",{key:a+"plstate"},[e("strong",[t._v(t._s(i.title))]),t._v(" "),a!==t.item.state.length-1?e("span",[t._v(",")]):t._e()])}))],2):t._e(),t.item&&t.item.priority&&t.item.priority.name?e(a.A,{staticClass:"py-1",attrs:{cols:"12",md:"4"}},[t._v(" اولویت : "),e("strong",[t._v(t._s(t.item.priority.name))])]):t._e(),t.item&&t.item.material?e(a.A,{staticClass:"py-1",attrs:{cols:"12",md:"4"}},[t._v(" مواد : "),e("strong",[t._v(t._s(t.item.material))])]):t._e(),t.item&&t.item.desc?e(a.A,{attrs:{cols:"12"}},[t._v(" توضیحات : "),e("span",{staticStyle:{"font-size":"14px"}},[t._v(t._s(t.item.desc))])]):t._e()],1),t.item&&t.item.files?e("UploadFile",{attrs:{hide:!0,items:t.item.files}}):t._e()],1)},n=[],o=i(2586),l={name:"ProductData",props:["item"],components:{UploadFile:o.A}},c=l,d=i(1656),u=(0,d.A)(c,s,n,!1,null,"5693f4ac",null),p=u.exports},5376:function(t,e,i){i.d(e,{A:function(){return C}});var a=i(375),r=i(1689),s=i(8834),n=i(4155),o=i(8230),l=i(7410),c=i(3406),d=function(){var t=this,e=t._self._c;return e(n.A,{attrs:{persistent:t.data.loading,"max-width":"760px"},model:{value:t.data.dialog,callback:function(e){t.$set(t.data,"dialog",e)},expression:"data.dialog"}},[e(r.A,{attrs:{disabled:t.data.loading,loading:t.data.loading,elevation:"0"}},[e("a-card-title",[t._v("جزئیات پروژه")]),e(s.OQ,{staticClass:"pb-0"},[e("ProductData",{attrs:{item:t.item}})],1),e(s.SL,["designer"!==t.$store.state.profile.role||t.publicUse?t._e():e("div",{staticClass:"dir-ltrF"},[e(o.A,{ref:"form"},[e(c.A,{attrs:{outlined:"",dense:"","hide-details":"",rules:[t.$store.state.rules.required(t.price,"قیمت")],label:"قیمت پیشنهادی",color:"txtf"},on:{keypress:function(e){return t.isNumber(e)}},scopedSlots:t._u([{key:"append",fn:function(){return[e("img",{attrs:{width:"24",height:"24",src:i(2079)}})]},proxy:!0}],null,!1,2973386753),model:{value:t.price,callback:function(e){t.price=e},expression:"price"}})],1)],1),e(l.A),"designer"!==t.$store.state.profile.role||t.publicUse?t._e():e(a.A,{attrs:{height:"36",dark:"",color:"#222e3c"},on:{click:function(e){return t.addProjectDesign()}}},[t._v(" درخواست پروژه ")])],1)],1)],1)},u=[],p=(i(8743),i(4757)),h=i(620),m=i(2505),f=i.n(m),g=i(9227),_=i.n(g),v=i(9476),y={components:{ProductData:v.A,ACardTitle:p.A},props:["ddata","publicUse"],mixins:[h.O],data(){return{price:null,designerPrice:null,item:{},data:this.ddata}},watch:{"data.dialog"(t){t?this.fetchProdcut():(this.item=null,this.price=null,this.designerPrice=null)},price(t){this.price?(this.price=_()(t).format("0,0"),this.designerPrice=_()(this.price).value()):this.designerPrice=null}},name:"ProductSingleDialog",methods:{addProjectDesign(){this.$refs.form.validate(),this.$refs.form.validate()&&(this.data.loading=!0,f().post(this.$store.state.host+"/projects/api/v1/productdesigner/create-productdesigner",{product:this.data.idSelected,price:this.designerPrice},{headers:{Accept:"application/json",Authorization:`Bearer ${this.$store.state.userId}`}}).then((()=>{this.notify("درخواست شما ثبت شد.","info"),this.$router.push({name:"AllRequestsProductDesigners"})})).catch((t=>{this.errorHandle(t.response)})).finally((()=>{this.data.loading=!1})))},fetchProdcut(){this.data.loading=!0,f().get(this.$store.state.host+"/projects/api/v1/product/single-product/"+this.data.idSelected,{headers:{Accept:"application/json",Authorization:`Bearer ${this.$store.state.userId}`}}).then((t=>{this.item=t.data.data})).catch((t=>{401==t.response.status?this.$router.push({name:"Login"}):this.errorHandle(t.response)})).finally((()=>{this.data.loading=!1}))}}},b=y,A=i(1656),x=(0,A.A)(b,d,u,!1,null,"db83c7b6",null),C=x.exports},7791:function(t,e,i){i.d(e,{l:function(){return a}});var a={data(){return{renderComponent:!0}},methods:{forceRerender(){this.renderComponent=!1,this.$nextTick((()=>{this.renderComponent=!0}))}}}},620:function(t,e,i){i.d(e,{O:function(){return a}});var a={methods:{isNumber:function(t){t=t||window.event;var e=t.which?t.which:t.keyCode;if(!(e>31&&(e<48||e>57)))return!0;t.preventDefault()}}}}}]);
//# sourceMappingURL=9319.89f36a09.js.map